# ImmunizationRecommendation

## Overview

An ImmunizationRecommendation represents a patient-specific set of vaccination recommendations. It provides guidance on which vaccines a patient should receive, when they should receive them, and the clinical reasoning behind the recommendations.

This resource is typically generated by immunization decision support systems based on a patient's immunization history, age, and clinical factors.

**Common use cases:**
- Vaccine scheduling
- Immunization forecasting
- Catch-up immunization planning
- Clinical decision support for vaccines
- Patient vaccination reminders

## FHIR R4 Specification

See the official HL7 specification: [https://hl7.org/fhir/R4/immunizationrecommendation.html](https://hl7.org/fhir/R4/immunizationrecommendation.html)

## Supported Fields

| Field | Type | Description |
|-------|------|-------------|
| `id` | string | Logical ID of the resource |
| `identifier` | Identifier[] | Business identifiers |
| `patient` | Reference(Patient) | Patient for recommendations |
| `date` | dateTime | Date recommendations were created |
| `authority` | Reference(Organization) | Responsible organization |
| `recommendation` | BackboneElement[] | Vaccine recommendations |
| `recommendation.vaccineCode` | CodeableConcept[] | Recommended vaccine |
| `recommendation.targetDisease` | CodeableConcept | Disease to prevent |
| `recommendation.forecastStatus` | CodeableConcept | Recommendation status |
| `recommendation.dateCriterion` | BackboneElement[] | Dates governing recommendation |
| `recommendation.doseNumberPositiveInt` | positiveInt | Recommended dose number |

## Search Parameters

| Parameter | Type | Description | Example |
|-----------|------|-------------|---------|
| `_id` | token | Resource ID | `_id=rec-001` |
| `identifier` | token | Business identifier | `identifier=REC-12345` |
| `patient` | reference | Patient reference | `patient=Patient/123` |
| `status` | token | Forecast status | `status=due` |
| `date` | date | Recommendation date | `date=2024-01-15` |
| `vaccine-type` | token | Vaccine code | `vaccine-type=08` |
| `target-disease` | token | Target disease | `target-disease=14189004` |

## Examples

### Create an ImmunizationRecommendation

```bash
curl -X POST http://localhost:8080/baseR4/ImmunizationRecommendation \
  -H "Content-Type: application/fhir+json" \
  -d '{
    "resourceType": "ImmunizationRecommendation",
    "identifier": [{
      "system": "http://hospital.example.org/recommendations",
      "value": "REC-2024-001"
    }],
    "patient": {"reference": "Patient/123"},
    "date": "2024-01-15T10:00:00Z",
    "authority": {"reference": "Organization/cdc"},
    "recommendation": [{
      "vaccineCode": [{
        "coding": [{
          "system": "http://hl7.org/fhir/sid/cvx",
          "code": "08",
          "display": "Hep B, adolescent or pediatric"
        }]
      }],
      "targetDisease": {
        "coding": [{
          "system": "http://snomed.info/sct",
          "code": "66071002",
          "display": "Viral hepatitis type B"
        }]
      },
      "forecastStatus": {
        "coding": [{
          "system": "http://terminology.hl7.org/CodeSystem/immunization-recommendation-status",
          "code": "due",
          "display": "Due"
        }]
      },
      "dateCriterion": [{
        "code": {
          "coding": [{
            "system": "http://loinc.org",
            "code": "30981-5",
            "display": "Earliest date to give"
          }]
        },
        "value": "2024-02-01"
      }],
      "doseNumberPositiveInt": 2
    }]
  }'
```

### Search ImmunizationRecommendations

```bash
# By patient
curl "http://localhost:8080/baseR4/ImmunizationRecommendation?patient=Patient/123"

# By vaccine type
curl "http://localhost:8080/baseR4/ImmunizationRecommendation?vaccine-type=08"

# By status
curl "http://localhost:8080/baseR4/ImmunizationRecommendation?status=due"
```

## Generator Usage

```python
from fhirkit.server.generator import ImmunizationRecommendationGenerator

generator = ImmunizationRecommendationGenerator(seed=42)

# Generate a random recommendation
recommendation = generator.generate()

# Generate for specific patient
patient_rec = generator.generate(
    patient_reference="Patient/123"
)

# Generate batch
recommendations = generator.generate_batch(count=10)
```

## Forecast Status Codes

| Code | Description |
|------|-------------|
| due | Vaccination is due |
| overdue | Vaccination is overdue |
| immune | Patient is immune |
| contraindicated | Vaccination is contraindicated |
| complete | Series is complete |

## Related Resources

- [Immunization](./immunization.md) - Administered immunizations
- [Patient](./patient.md) - Patient receiving recommendations
- [ImmunizationEvaluation](./immunization-evaluation.md) - Evaluation of immunization status
